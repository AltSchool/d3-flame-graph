!function(){"use strict";function t(){function t(t){document.getElementById("details").innerHTML=t}function n(t){return t.dummy?"":t.name+" ("+d3.round(100*t.dx,3)+"%, "+t.value+" samples)"}function e(t){return t.name}function r(t){var n=0,e=1,r=0,i=10,a=6;if(t){for(var u=0;u<t.length&&!(u>a);u++)n+=e*(t.charCodeAt(u)%i),r+=e*(i-1),e*=.7;r>0&&(n/=r)}return n}function i(t){var n=0;t&&(t=t.replace(/.*`/,""),t=t.replace(/\(.*/,""),n=r(t));var e=200+Math.round(55*n),i=0+Math.round(230*(1-n)),a=0+Math.round(55*(1-n));return"rgb("+e+","+i+","+a+")"}function a(t){if(t.children&&t.children.length>0){t.children.forEach(a);var n=0;t.children.forEach(function(t){n+=t.value}),n<t.value&&t.children.push({name:"",value:t.value-n,dummy:!0})}}function u(t){t.original||(t.original=t.value),t.value=0,t.children&&t.children.forEach(u)}function c(t){t.fade=!1,t.original&&(t.value=t.original),t.children&&t.children.forEach(c)}function o(t){var n=[];if(t.parent){var e=t.parent.children.indexOf(t);n=t.parent.children.slice(0),n.splice(e,1)}return n}function l(t){var n=o(t);n.forEach(function(t){u(t)}),t.parent&&l(t.parent)}function d(t){t.parent&&(t.parent.fade=!0,d(t.parent))}function f(t){k.hide(t),l(t),c(t),d(t),g()}function h(t,n){var e=new RegExp(n),r=t.name;t.children&&t.children.forEach(function(t){h(t,n)}),r.match(e)?t.highlight=!0:t.highlight=!1}function s(t){t.highlight=!1,t.children&&t.children.forEach(function(t){s(t,term)})}function g(){y.each(function(r){var a=H(r),u=p/r.dx,c=d3.select(this).select("svg").selectAll("g").data(a);c.transition().duration(O).ease(j).attr("transform",function(t){return"translate("+A(t.x)+","+(v-D(t.depth)-x)+")"}),c.select("rect").transition().duration(O).ease(j).attr("width",function(t){return t.dx*u});var o=c.enter().append("svg:g").attr("transform",function(t){return"translate("+A(t.x)+","+(v-D(t.depth)-x)+")"});o.append("svg:rect").attr("width",function(t){return t.dx*u}),o.append("svg:title"),o.append("foreignObject").append("xhtml:div"),c.attr("width",function(t){return t.dx*u}).attr("height",function(t){return x}).attr("name",function(t){return t.name}).attr("class",function(t){return t.fade?"frame fade":"frame"}),c.select("rect").attr("height",function(t){return x}).attr("fill",function(t){return t.highlight?"#E600E6":i(t.name)}).style("visibility",function(t){return t.dummy?"hidden":"visible"}),c.select("title").text(n),c.select("foreignObject").attr("width",function(t){return t.dx*u}).attr("height",function(t){return x}).select("div").attr("class","label").style("display",function(t){return t.dx*u<35||t.dummy?"none":"block"}).text(e),c.on("click",f),c.exit().remove(),c.on("mouseover",function(e){e.dummy||(E&&k.show(e),t("Function: "+n(e)))}).on("mouseout",function(n){n.dummy||(E&&k.hide(n),t(""))})})}function m(t){return y=t,arguments.length?void y.each(function(t){var n=d3.select(this).append("svg:svg").attr("width",p).attr("height",v).attr("class","partition").call(k);n.append("svg:text").attr("class","title").attr("text-anchor","middle").attr("y","25").attr("x",p/2).attr("fill","#808080").text(b),a(t),H(t),g()}):m}var p=960,v=540,x=18,y=null,E=!0,b="",w="s",M=[8,0],O=750,j="cubic-in-out",k=d3.tip().direction(w).offset(M).attr("class","d3-tip").html(function(t){return n(t)}),A=d3.scale.linear().range([0,p]),D=d3.scale.linear().range([0,x]),H=d3.layout.partition().sort(function(t,n){return d3.ascending(t.name,n.name)}).value(function(t){return t.v||t.value}).children(function(t){return t.c||t.children});return m.height=function(t){return arguments.length?(v=t,m):v},m.width=function(t){return arguments.length?(p=t,m):p},m.cellHeight=function(t){return arguments.length?(x=t,m):x},m.tooltip=function(t){return arguments.length?(E=t,m):E},m.title=function(t){return arguments.length?(b=t,m):b},m.tooltipDirection=function(t){return arguments.length?(w=t,m):w},m.tooltipOffset=function(t){return arguments.length?(M=t,m):M},m.transitionDuration=function(t){return arguments.length?(O=t,m):O},m.transitionEase=function(t){return arguments.length?(j=t,m):j},m.search=function(t){y.each(function(n){h(n,t),g()})},m.clear=function(){y.each(function(t){s(t),g()})},m}"undefined"!=typeof module&&module.exports?module.exports=t:d3.flameGraph=t}();